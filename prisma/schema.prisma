generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Usuario {
  //informações primarias do usuário
  id           String   @id @default(uuid())
  nome         String
  email        String   @unique
  tipo         String
  //informações do Tutor/aluno
  bio          String? 
  instituicao  String?
  curso        String?
  formacao     String?
  especialidades String[] @default([])
  cidade       String?
  estado       String?
  //chaves estrangeirass
  duvidasPropostas      Duvida[] @relation("AlunoDuvidas")
  duvidasAssumidas  Duvida[] @relation("TutorDuvidas")
  propostas Proposta[] 
  //Data em que foi criado
  createdAt    DateTime @default(now())
  updatedAt       DateTime @updatedAt @default(now())
}

model Duvida {
  id        String   @id @default(uuid())
  titulo    String
  materia   String
  descricao String
  status    String   @default("aberta")
  valorSugerido Float? 

  alunoId   String
  aluno     Usuario  @relation("AlunoDuvidas", fields: [alunoId], references: [id])

  tutorId   String?
  tutor     Usuario? @relation("TutorDuvidas", fields: [tutorId], references: [id])

  propostas Proposta[]

  deadLine  DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model Proposta {
  id         String   @id @default(uuid())
  valor      Float 
  mensagem   String?  
  status     String   @default("pendente") 

  duvidaId   String
  duvida     Duvida   @relation(fields: [duvidaId], references: [id])

  tutorId    String
  tutor      Usuario  @relation(fields: [tutorId], references: [id])

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt @default(now())
}